<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	
		<link href="css/estilo.css" rel="stylesheet">

        <style>
            
            input{
                width: 350px;
            }

            .form{
                display: grid;
                grid-template-columns: repeat(2, 400px);
                grid-template-rows: repeat(5, 75px);
                margin-left: 50px;
            }

            .personagem{
                margin: 50px 0 50px 150px;
            }

            .personagem input{
                margin-left: 10px;
            }

            .subInput{
                width: 100px;
            }

        </style>
    </head>
    <body>
        <label class="personagem">Personagem <input type="text"></label>

        <div class="form">
            <label>Primeira dica <input type="text"></label>
            <label>Segunda dica <input type="text"></label>
            <label>Terceira dica <input type="text"></label>
            <label>Quarta dica <input type="text"></label>
            <label>Quinta dica <input type="text"></label>
            <label>Sexta dica <input type="text"></label>
            <label>Sétima dica <input type="text"></label>
            <label>Oitava dica <input type="text"></label>
            <label>Nona dica <input type="text"></label>
            <label>Décima dica <input type="text"></label>
            <label>Nível do personagem <input type="text"></label>
            <input type="submit" class="subInput">
        </div>


        <script>
            const inputSubmit = document.querySelector('.subInput');
            const inputs = document.querySelectorAll('input');

            inputs[0].focus();

            inputSubmit.addEventListener('click', valuesInputs);

            document.addEventListener('keyup', function(e){
                if(e.keyCode === 13){
                    valuesInputs();
                }
            })

            function valuesInputs(){
                var valores = [];
                var x = 0;
                while(x <= 11){
                    if(inputs[x].value === ""){
                        alert("Preencha todos os inputs");
                        return;
                        
                    }
                    valores.push(inputs[x].value);

                    inputs[x].value = "";
                    x++;

                }

                let _valores = Object.assign({}, valores);  
                
                ajaxSend(_valores)
               
            }

            function ajaxSend(val){      
                let xhr = new XMLHttpRequest();
                let url = "http://localhost:3000/perguntas";
                let dataStringFly = JSON.stringify(val);

                xhr.open("POST", url);
                xhr.setRequestHeader("Content-type", "application/json;charset=UTF-8");
                xhr.send(dataStringFly);
                xhr.onreadystatechange = verificaAjax

                function verificaAjax(cb){
                    if(xhr.readyState === 4){
                        if(xhr.status < 400){
                            const json = JSON.parse(xhr.responseText);
                        }else{
                            alert("Deu ruim")
                        }
                    }
                }
            }
    </script>
        </script>

    </body>
</html>