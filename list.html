<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	
		<link href="css/estilo.css" rel="stylesheet">

        <style>

            .btnVoltarTela{
                border: solid 2px black;
                position: absolute;
                bottom: 20px;
                right: 20px;
                padding: 10px;
                cursor: pointer;
            }
        </style>

    </head>
    <body>
        <label>Pesquise se um personagem já existe</label>
        <input type="text" class="textInput"> <button class="btnPersonagem btn">Enviar Personagem</button>
        <input type="number" class="textId"> <button class="btnId btn">Enviar ID</button>

        <div class="listPersonagens">
            <ul class="ulPersonagens">
            </ul>
        </div>

        <div class="none btnVoltarTela"><btn>Voltar lista completa</btn></div>

        <script type="module">
            import { ListView } from './js/View/ListView.js';
            const $ulPersonagens = document.querySelector('.ulPersonagens');
            new ListView($ulPersonagens);
            // initAll($ulPersonagens);
            // let jj = new ListView($ulPersonagens);
        </script>
        <script type="module">
            // import { createFetch } from './js/createFetch.js';

            // const $inputText = document.querySelector('.textInput');
            // const $inputId = document.querySelector('.textId');
            // const $btnPersonagem = document.querySelector('.btnPersonagem');
            // const $btnId = document.querySelector('.btnId');
            // const $btnVoltarTela = document.querySelector('.btnVoltarTela')

            // if($inputText.value === "" && $inputId.value === ""){
            //     ajaxGet();
            // }


            // function ajaxGet(){

            //    let fetchList = createFetch("GET", "http://localhost:3000/perguntas")
            //     .then(response => viewList(response));
                
            // }

                

            //     function viewList(list){ 
            //         console.log(list);
            //         $ulPersonagens.innerHTML = "";
            //         const l = list[0];
            //         var x = 0;
            //         while(x < list.length){
            //             const $li = document.createElement('li');
            //             let i = 0;
            //             i += x;
            //             let text = document.createTextNode(list[i].id + " " + list[x].personagem);
            //             $li.appendChild(text); 
            //             $ulPersonagens.appendChild($li);
            //             x++;
            //         }

            //         $btnPersonagem.addEventListener('click', function(){
            //             let personagemProcurado = $inputText.value;

            //             personagemProcurado = personagemProcurado.toLowerCase();

            //             if(personagemProcurado == ""){
            //                 alert("Input vazio");
            //                 return
            //             }

            //             let qtdPersonagens = list.length;
            //             let x = 0;
            //             while(x < list.length){
            //                 let personagens = list[x].personagem;
            //                 personagens = personagens.toLowerCase();
            //                 if(personagemProcurado === personagens){
            //                     $ulPersonagens.innerHTML = `<li>${list[x].id} ${list[x].personagem}`;
            //                     $inputText.value = "";

            //                     $btnVoltarTela.classList.remove('none');

            //                     $btnVoltarTela.addEventListener('click', function(){
            //                         $ulPersonagens.innerHTML = ""; 
            //                         ajaxGet();
            //                         $btnVoltarTela.classList.add('none');
            //                     })
            //                     return;
            //                 }else{
            //                     if(x + 1 == qtdPersonagens){
            //                         alert("Personagem não encontrado");
            //                         return
            //                     }
            //                 }

            //                 x++;
            //             }

            //         });

            //         $btnId.addEventListener('click', function(){
            //             const idProcurado = $inputId.value;

            //             if(idProcurado == ""){
            //                 alert("Input vazio");
            //                 return
            //             }

            //             let x = 0;
            //             let qtdPersonagens = list.length;
            //             while(x < list.length){
            //                 let ids = list[x].id;
            //                 if(idProcurado == ids){
            //                     $ulPersonagens.innerHTML = `<li>${list[x].id} ${list[x].personagem}`;
            //                     $inputId.value = "";

            //                     $btnVoltarTela.classList.remove('none');

            //                     $btnVoltarTela.addEventListener('click', function(){
            //                         $ulPersonagens.innerHTML = ""; 
            //                         ajaxGet();
            //                         $btnVoltarTela.classList.add('none');
            //                     })
            //                     return;
            //                 }else{
            //                     console.log(x + 1, qtdPersonagens);
            //                     if(x + 1 == qtdPersonagens){
            //                         alert("Personagem não encontrado");
            //                         return
            //                     }
            //                 }

            //                 x++;
            //             }

            //         })
            //     }


        </script>
    </body>
</html>