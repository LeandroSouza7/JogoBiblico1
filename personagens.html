<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link
		rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
	  />
		<link href="css/estilo.css" rel="stylesheet">

        <style>
            
            input{
                width: 350px;
            }

            .form{
                display: grid;
                grid-template-columns: repeat(2, 400px);
                grid-template-rows: repeat(5, 75px);
                margin-left: 50px;
            }

            .personagem{
                margin: 50px 0 50px 150px;
            }

            .personagem input{
                margin-left: 10px;
            }

            .subInput{
                width: 100px;
            }

        </style>
    </head>
    <body>
        <label class="personagem">Personagem <input type="text"></label>

        <div class="form">
            <label>Primeira dica <input type="text"></label>
            <label>Segunda dica <input type="text"></label>
            <label>Terceira dica <input type="text"></label>
            <label>Quarta dica <input type="text"></label>
            <label>Quinta dica <input type="text"></label>
            <label>Sexta dica <input type="text"></label>
            <label>Sétima dica <input type="text"></label>
            <label>Oitava dica <input type="text"></label>
            <label>Nona dica <input type="text"></label>
            <label>Décima dica <input type="text"></label>
            <input type="submit" class="subInput">
        </div>


        <script>
            const inputSubmit = document.querySelector('.subInput');
            const inputs = document.querySelectorAll('input');

            function cb(json){
                console.log(json)
            }

            inputSubmit.addEventListener('click', function(){
                var valores = [];
                var x = 0;
                while(x <= 10){
                    if(inputs[x].value === ""){
                        alert("Preencha todos os inputs");
                        return;
                        
                    }
                    valores.push(inputs[x].value);

                    inputs[x].value = "";
                    x++;

                }

                let _valores = Object.assign({}, valores);  
                
                ajaxSend(_valores)
               
            })

            function ajaxSend(val){      
                let xhr = new XMLHttpRequest();
                let url = "http://localhost:3000/perguntas";
                let dataStringFly = JSON.stringify(val);

                xhr.open("POST", url);
                xhr.setRequestHeader("Content-type", "application/json;charset=UTF-8");
                xhr.send(dataStringFly);
                xhr.onreadystatechange = verificaAjax

                function verificaAjax(cb){
                    console.log(xhr.readyState)
                    if(xhr.readyState === 4){
                        if(xhr.status < 400){
                            const json = JSON.parse(xhr.responseText);
                        }else{
                            alert("Deu ruim")
                        }
                    }
                }
            }


    

             
        // async function getUser(id){
        //     let url = `https://jsonplaceholder.typicode.com/users/${id}`;           
        //     let promise  = await fetch(url);
            
        //     if(!promise.ok){
        //         throw new Error('FALHOU --- ')
        //     }            
            
        //     let usuario = await promise.json();
            
        //     return usuario;
                
        // }
        
        // function mostraUsuarios(usuario){   
        //     adicionarElemento($listaUsuarios, 'dt', usuario.id);
        //     adicionarElemento($listaUsuarios, 'dd', usuario.name, usuario.email, usuario.phone, usuario. website);  
        // }
        
    
        // function adicionarElemento(container, tag, ...text){
            
        //     [...text].forEach( str => {
        //         let _tag = document.createElement(tag);
        //         let _textNode = document.createTextNode(str);
        //         _tag.appendChild(_textNode);
        //         container.appendChild(_tag);
                
        //     } )
        // }
        
        
        // getUser(1)
        //     .then( resposta => {
        //         console.log('---sucesso');
        //         console.log(resposta);
        //         mostraUsuarios(resposta);
        //     return getUser(2);
        //     } )
        //     .then( resposta => {
        //         console.log('---sucesso');
        //         console.log(resposta);
        //         mostraUsuarios(resposta);
        //         return getUser('3a');
        //     } )
        //     .then( resposta => {
        //         console.log('---sucesso');
        //         console.log(resposta);
        //         mostraUsuarios(resposta);
        //         return getUser(4);
        //     } )
        //     .then( resposta => {
        //         console.log('---sucesso');
        //         console.log(resposta);
        //         mostraUsuarios(resposta);
        //     } )
        //     .catch( err => {
        //         console.log('---erro')
        //         console.log(err.message);
        //     } )
        
    
        
        
    </script>
        </script>

    </body>
</html>